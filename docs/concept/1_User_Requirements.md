## 1. 목적

본 문서는 CCTV Synthetic Data Generation Engine이 사용자의 관점에서 반드시 제공해야 하는
기능적 요구사항을 정의한다.  
모든 요구사항은 테스트·검증이 가능하도록 정량적 또는 명확한 형태로 표현한다.

---

## 2. 용어 정의

- **Scene**: Factory/Office/Warehouse/Hospital/Military 등 미리 정의된 환경
- **Camera**: 고정형 CCTV 또는 이동형 Robot 카메라
- **Frame**: 시뮬레이션 한 틱에서 생성되는 단일 이미지와 라벨 세트
- **Global ID**: Scene/session 전체에서 동일 인물을 식별하는 정수 ID
- **Track ID**: 카메라별 프레임 간 ID
- **Session**: 하나의 데이터 생성 실행 단위

---

## 3. 사용자 요구사항 (User Requirements)

### UR-01. Scene 다양성
시스템은 **최소 1개 이상의 Scene**(Factory)을 제공해야 한다.  
Phase 2 이후에는 **최소 3개 Scene**을 제공해야 하며,  
사용자는 생성 시 어느 Scene을 사용할지 선택할 수 있어야 한다.

---

### UR-02. Multi-camera 구성 가능
사용자는 **1~6대** 범위의 카메라를 생성 시 설정할 수 있어야 한다.  
각 카메라는 다음 속성을 설정 가능해야 한다:
- 위치/높이/방향
- 시야각(FOV)
- 해상도(예: 720p/1080p)  
(값 목록은 SR에서 구체화)

---

### UR-03. 군중 규모 제어
사용자는 생성 시 인물 수(최소/최대)를 지정할 수 있어야 한다.  
Phase별 목표:
- Phase 1: 10~30명  
- Phase 2: 10~100명  
- Phase 3: 10~200명 이상  

---

### UR-04. 행동 패턴 선택
사용자는 인물 행동 패턴을 선택/조합할 수 있어야 한다:
- 기본 행동: Walk, Idle  
- 확장 행동(Phase 2+): Group Move  
- 고급 행동(Phase 3+): 넘어짐/싸움/상호작용 등 (선택적)

---

### UR-05. 자동 라벨 생성
시스템은 **사람 단위 라벨**을 자동 생성해야 한다:
- 2D Bounding box  
- Track ID (카메라별)  
- Global ID (Scene/session 전체)  

※ 정확도·계산 방식은 SR/LDD에서 정의.

---

### UR-06. 고급 라벨(Phase 2+)
Phase 2부터 다음 라벨도 생성 가능해야 한다:
- Occlusion ratio  
- Visibility ratio  

Phase 1에서는 필수 아님.

---

### UR-07. 대량 프레임 생성
시스템은 사용자 요청에 따라 다음 프레임 수를 생성할 수 있어야 한다:
- Phase 1: 최소 100,000 프레임  
- Phase 2: 최소 500,000 프레임  
- Phase 3: 최소 1,000,000 프레임 이상  

---

### UR-08. 세션 재현성 (Reproducibility)
사용자는 하나의 Config 파일을 저장하고,
동일 Config로 생성할 경우 **동일한 데이터셋**을 복제할 수 있어야 한다.

---

### UR-09. Domain Randomization (Phase 2+)
사용자는 다음 항목을 세기/범위 기반으로 제어할 수 있어야 한다:
- 조명 (밝기/색온도)  
- 색감 (채도/대비/감마)  
- 카메라 노이즈 (Gaussian 등)  
- 날씨 효과 (비/안개 등)

Phase 1에서는 기본 조명만 제공하면 된다.

---

### UR-10. 실시간 진행률 확인
사용자는 데이터 생성 중 다음 정보를 실시간 확인할 수 있어야 한다:
- 현재 프레임 번호  
- FPS(처리 속도)  
- 예상 완료 시간  
- 오류 발생 여부

업데이트 주기: 최소 1초 1회 이상

---

### UR-11. Export 포맷
사용자는 데이터를 다음 포맷으로 Export할 수 있어야 한다:
- 이미지: JPG 또는 PNG
- 라벨: JSON (기본),
  Phase 2+: YOLO / COCO
- Phase 2+: ReID 학습용 Dataset (person_id 별 crop 이미지)
- Phase 3+: Edge-friendly 포맷 (TFLite/ONNX 등)

---

### UR-12. 데이터 품질 검증 결과 제공
세션이 완료되면 사용자는 자동 생성된 **검증 리포트**를 확인할 수 있어야 한다:
- 누락/손상 프레임 수  
- bbox/라벨 값 범위 검증 결과  
- 통계 요약 (사람 수, detection 수, occlusion histogram 등)  
표시 형식은 SR에서 정의.

---

### UR-13. 동일 설정 반복 생성
사용자는 동일한 Config로 여러 번 실행하여  
동일한 dataset을 반복 생성할 수 있어야 한다 (seed 기반).

---

### UR-14. 주요 OS/GPU 환경 지원
사용자는 다음 환경에서 엔진을 사용할 수 있어야 한다:
- OS: Windows, Linux  
- GPU: NVIDIA 기반 환경  

(지원 범위는 SR에서 구체화)

---

### UR-15. 윤리적 사용 가이드 제공
시스템은 사용자에게 다음을 포함한 윤리 가이드를 제공해야 한다:
- 합성 데이터임을 명시하는 방법  
- 실존 인물과 유사한 외형 생성 금지  
- 데이터 다양성 권고  
- 금지 용도 안내  

이 가이드는 문서 또는 UI에 제공되면 된다.
